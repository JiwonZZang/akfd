<style>
/*http://stackoverflow.com/questions/1084925/input-type-file-show-only-button
    show only button of file input
*/
.inputWrapper {
		height: 70px;
    width: 100%;;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    /*Using a background color, but you can use a background image to represent a button*/
    background: url(http://archifeeld.net:3000/images/fileupload.png) no-repeat;
		background-size: 100%;
}
#preview{
	width: 100%;
}
#preview img{
	margin: 1%;
}
.fileInput {
    cursor: pointer;
    height: 100%;
    position:absolute;
    top: 0;
    right: 0;
    z-index: 99;
    /*This makes the button huge. If you want a bigger button, increase the font size*/
    font-size:50px;
    /*Opacity settings for all browsers*/
    opacity: 0;
    -moz-opacity: 0;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0)
}
</style>
<script>
function previewFiles(){
    var preview = document.querySelector("#preview");
    var files = document.querySelector('input[type=file]').files;
    console.log(files)
    preview.innerHTML = "";
    global_files = files;

    function readAndPreview(file){
        // Make sure  'file.name' matches our extensions cirteria
        //if (/\.(jpe?g|png|gif)$/i.text(file.name)){
        //if (file.name){
            var reader = new FileReader();
            reader.addEventListener("load", function(){
                var image = new Image();
                image.height = 100;
                image.width= 100;
                image.title = file.name;
                image.src = this.result;
                preview.appendChild(image);
            }, false);
            reader.readAsDataURL(file);
        //}
    }

    if (global_files){
        [].forEach.call(files, readAndPreview);
    }
}
</script>
<div style="float:left; width:75%; height:75px; background:#F2F2F2; padding:2%;">
	<img src="<%= current_user.image_url%>" style="width:8%" class="img-rounded">&nbsp; 
	<span style="color:#4C5249; font-size:1.5em"><%= current_user.name %></span>
	<img class="modal_close" style="width:20px; height:20px;" align="right" src="/images/xbtn.png">
</div>

<div align="center" style="float:left; width:25%; height:75px; background:white; padding:2%;">
	<div style="color:#BBBBBB; font-size:1.3em;">마이필드<br> 프로젝트 관리</div>
</div>

<%= form_for @post do |f| %>
<div style="float:left; width:75%; height:400px; background:#E9E9E9; padding:2%; overflow-y:scroll">
	<%= f.text_field :title, :id => 'input_post_title', :class => "form-control",  :placeholder => '이곳에 제목을 작성해 주세요' %>

	<div style="margin-bottom: 1%"></div>
	<div class="inputWrapper">
		<%= f.file_field :images, multiple: true,  accept: 'image/png,image/gif,image/jpeg', class: "fileInput", onchange: "previewFiles()" %>
	</div>

	<div style="margin-bottom: 1%"></div>
	<div id="preview"></div>

	<div style="margin-bottom: 1%"></div>
	<%= f.text_area :content, :id => 'input_post_content', :class => 'form-control', :rows => '5', placeholder: "이미지에 캡션을 다는 방법! \n #1# 기말 마감 첫번째 작품 \n #2# 기말 마감 두번째 작품\n 위와 같이 이미지의 번호(n번째)를 #로 감싸서, \n캡션을 붙일 수 있습니다.. (설명 수정) "%>
	<div style="margin-bottom: 1%"></div>
	<%= f.text_field :tag_list_fixed, class: 'form-control', placeholder: "태그 (태그는 쉼표로 구분해주세요! ex) 태그1, 태그2)" %>
	<div class="has-error">
		<div class="checkbox disabled">
			<label style="margin-left: 1%;">
				<input type="checkbox" value="secret" disabled>
				비밀글로 작성합니다
			</label>
		</div>
	</div>
</div>

<div style="float:left; width:25%; height:323px; background:#F2F2F2; padding:1%; overflow-y: scroll">
	<div id="project_radio_container">
		<div>
			<%= f.radio_button(:project_id, "") %>
			&nbsp;선택 안함
		</div>
		<% current_user.projects.each do |project| %>
			<%= render 'projects/project_radio', project: project, f: f %>
		<% end %>
	</div>
</div>
<%= f.button :submit, class: "hidden", id: "feeldup-submit" %>
<% end %>

<%= render "projects/form" %>

<div style="float:left; width:75%; height:75px; background:#F2F2F2;">
</div>


<div align="center" style="float:left; width:25%; height:75px; background:white; padding:5px;">
	<%= link_to image_tag('/images/feeldup_write.png'), "#", :onclick=>"$('#feeldup-submit').click()", id: "feeldup-submit-link" %> 
</div>
<!--</form>-->
